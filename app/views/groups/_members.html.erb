<h1>Members</h1>
<table>
  <tbody>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Total Spent</th>
        <th>Owed/Owes</th>
      </tr>
    <% @group.users.each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.email %></td>
        <td><%= user.find_membership(@group).spent_for_group %></td>
        <% if user.find_membership(@group).owed%>
          <td class=owed>Owed:<%= user.find_membership(@group).owed %></td>
        <% elsif user.find_membership(@group).owes%>
          <td class=owes>Owes:<%= user.find_membership(@group).owes%></td>
        <% else %>
          <td></td>
        <% end%>
      </tr>
    <% end %>
      <tr>
        <td></td>
        <td>
          <a href="#" data-reveal-id="myModal">Add Member</a>
          <div id="myModal" class="reveal-modal" data-reveal>
            <p>Add someone to <%=@group.name%></p>
            <%= simple_form_for [@group, @group_user], controller: :group_user, action: :create do |f|%>
              <%= f.input :email_address %>
              <%= f.button :submit, "Add Member", class: "tiny" %>
            <%end%>
            <a class="close-reveal-modal">&#215;</a>
          </div>
        </td>
        <td><%= button_to "Remove Me From This Group", group_group_user_path(@group, current_user.find_membership(@group)), data: {confirm: "Are you sure you want to remove yourself from #{@group.name}?"}, method: :delete %></td>
        <td></td>
      </tr>

  </tbody>
</table>